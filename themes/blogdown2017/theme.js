"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ThemeBody=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"beforeRegister",value:function(){var e;this.is="theme-body",this.actions={isNarrow:function(e){return function(t){t({type:IS_NARROW,payload:e})}}},this.properties=(e={metaLoading:{type:Array,statePath:"meta.loading",observer:"progressChanged"},metaProgress:{type:Number,statePath:"meta.progress",observer:"progressChanged"},notifications:{type:Array,statePath:"notifications",observer:"notificationsChanged"},meta:{type:Object,statePath:"meta"},pages:{type:[],statePath:"pages"},settings:{type:Object,statePath:"settings"}},_defineProperty(e,"meta",{type:Object,statePath:"meta"}),_defineProperty(e,"narrow",{type:Boolean,observer:"narrowChanged"}),_defineProperty(e,"animationConfig",{value:function(){return{entry:{name:"scale-up-animation",node:this},exit:{name:"fade-out-animation",node:this}}}}),e)}},{key:"ready",value:function(){this.set("themeSettings",_.assign({toastDuration:5e3},app.getThemeSettings())),this.set("indeterminateLoading",!0),this.set("socialAccounts",[]),this.set("menuItems",[]),this.loadMenuItems(),this.loadSocialAccounts()}},{key:"loadMenuItems",value:function(){var e=this;_.each(this.pages,function(t){t.addToMenu&&e.push("menuItems",{title:t.title,slug:t.slug})})}},{key:"loadSocialAccounts",value:function(){var e=this;_.each(this.themeSettings.socialAccounts,function(t,n){e.push("socialAccounts",{type:n,url:t})})}},{key:"toggleDrawer",value:function(){this.$.drawer.toggle()}},{key:"closeDrawer",value:function(){this.narrow&&this.$.drawer.close()}},{key:"narrowChanged",value:function(){this.dispatch("isNarrow",this.narrow)}},{key:"notificationsChanged",value:function(){if(this.hideToast(),this.meta&&this.meta.appLoaded)switch(this.set("notification",this.notifications[this.notifications.length-1]),this.notification.type){case"error":this.$.toastError.open();break;case"warn":this.$.toastWarn.open();break;default:this.$.toastInfo.open()}}},{key:"hideToast",value:function(){this.$.toastError.close(),this.$.toastWarn.close(),this.$.toastInfo.close()}},{key:"progressChanged",value:function(){this.metaLoading.length>0?(this.set("loading",!0),this.set("progress",0)):this.metaProgress>0?(this.set("loading",!1),this.set("progress",this.metaProgress)):(this.set("loading",!1),this.set("progress",0))}},{key:"behaviors",get:function(){return[BodyBehavior,Polymer.NeonAnimationRunnerBehavior,ReduxActionsBehavior,ReduxStateBehavior]}}]),e}();Polymer(ThemeBody);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ThemePage=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"beforeRegister",value:function(){this.is="theme-page",this.properties={page:{type:Object,value:{}},animationConfig:{value:function(){return{entry:{name:app.getThemeSettings().pageTransition||"scale-up-animation",node:this}}}}}}},{key:"attached",value:function(){this.style.display="inline-block",this.playAnimation("entry")}},{key:"behaviors",get:function(){return[PageBehavior,Polymer.NeonAnimationRunnerBehavior]}}]),e}();Polymer(ThemePage);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ThemePost=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"beforeRegister",value:function(){this.is="theme-post",this.properties={authors:{type:Object,statePath:"authors"},settings:{type:Object,statePath:"settings"},animationConfig:{value:function(){return{entry:{name:app.getThemeSettings().pageTransition||"scale-up-animation",node:this}}}}}}},{key:"attached",value:function(){this.style.display="inline-block",this.playAnimation("entry")}},{key:"getAuthorDisplayName",value:function(e){return e?this.authors[e].displayName:""}},{key:"getDate",value:function(e){return e?e.format(this.settings.dateFormat):""}},{key:"behaviors",get:function(){return[PostBehavior,Polymer.NeonAnimationRunnerBehavior,ReduxActionsBehavior,ReduxStateBehavior]}}]),e}();Polymer(ThemePost);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ThemePosts=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"beforeRegister",value:function(){this.is="theme-posts",this.properties={authors:{type:Object,statePath:"authors"},settings:{type:Object,statePath:"settings"},animationConfig:{value:function(){return{entry:{name:app.getThemeSettings().pageTransition||"scale-up-animation",node:this}}}}}}},{key:"attached",value:function(){this.style.display="inline-block",this.playAnimation("entry")}},{key:"flexDirection",value:function(e){return e%2==0?"-reverse":""}},{key:"getAuthorDisplayName",value:function(e){return e?this.authors[e].displayName:""}},{key:"getDate",value:function(e){return e?e.format(this.settings.dateFormat):""}},{key:"behaviors",get:function(){return[PostsBehavior,Polymer.NeonAnimationRunnerBehavior,ReduxStateBehavior]}}]),e}();Polymer(ThemePosts);