"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ThemeBody=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"beforeRegister",value:function(){var e;this.is="theme-body",this.actions={isNarrow:function(e){return function(t){t({type:IS_NARROW,payload:e})}}},this.properties=(e={metaLoading:{type:Array,statePath:"meta.loading",observer:"progressChanged"},metaProgress:{type:Number,statePath:"meta.progress",observer:"progressChanged"},notifications:{type:Array,statePath:"notifications",observer:"notificationsChanged"},meta:{type:Object,statePath:"meta"},pages:{type:[],statePath:"pages"},settings:{type:Object,statePath:"settings"}},_defineProperty(e,"meta",{type:Object,statePath:"meta"}),_defineProperty(e,"narrow",{type:Boolean,observer:"narrowChanged"}),_defineProperty(e,"animationConfig",{value:function(){return{entry:{name:"scale-up-animation",node:this},exit:{name:"fade-out-animation",node:this}}}}),e)}},{key:"ready",value:function(){this.set("themeSettings",_.assign({toastDuration:5e3},app.getThemeSettings())),this.set("indeterminateLoading",!0),this.set("socialAccounts",this.getSocialAccounts()),this.set("menuItems",[]),this.loadMenuItems()}},{key:"loadMenuItems",value:function(){var e=this;_.each(this.pages,function(t){t.addToMenu&&e.push("menuItems",{title:t.title,slug:t.slug})})}},{key:"getSocialAccounts",value:function(){return _.map(this.themeSettings.socialAccounts,function(e,t){return{type:t,url:e}})}},{key:"toggleDrawer",value:function(){this.$.drawer.toggle()}},{key:"closeDrawer",value:function(){this.narrow&&this.$.drawer.close()}},{key:"narrowChanged",value:function(){this.dispatch("isNarrow",this.narrow)}},{key:"notificationsChanged",value:function(){if(this.hideToast(),this.meta&&this.meta.appLoaded)switch(this.set("notification",this.notifications[this.notifications.length-1]),this.notification.type){case"error":this.$.toastError.open();break;case"warn":this.$.toastWarn.open();break;default:this.$.toastInfo.open()}}},{key:"hideToast",value:function(){this.$.toastError.close(),this.$.toastWarn.close(),this.$.toastInfo.close()}},{key:"progressChanged",value:function(){this.metaLoading.length>0?(this.set("loading",!0),this.set("progress",0)):this.metaProgress>0?(this.set("loading",!1),this.set("progress",this.metaProgress)):(this.set("loading",!1),this.set("progress",0))}},{key:"behaviors",get:function(){return[BodyBehavior,Polymer.NeonAnimationRunnerBehavior,ReduxActionsBehavior,ReduxStateBehavior]}}]),e}();Polymer(ThemeBody);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ThemePage=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"beforeRegister",value:function(){this.is="theme-page",this.properties={page:{type:Object,value:{}},settings:{type:Object,statePath:"settings"},animationConfig:{value:function(){return{entry:{name:app.getThemeSettings().pageTransition||"scale-up-animation",node:this}}}}}}},{key:"ready",value:function(){"home"===this.page.slug&&this.set("page.title",this.settings.title)}},{key:"attached",value:function(){this.set("style.display","inline-block"),this.playAnimation("entry")}},{key:"behaviors",get:function(){return[PageBehavior,ReduxStateBehavior,Polymer.NeonAnimationRunnerBehavior]}}]),e}();Polymer(ThemePage);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ThemePost=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"beforeRegister",value:function(){this.is="theme-post",this.properties={authors:{type:Object,statePath:"authors"},settings:{type:Object,statePath:"settings"},animationConfig:{value:function(){return{entry:{name:app.getThemeSettings().pageTransition||"scale-up-animation",node:this}}}}}}},{key:"attached",value:function(){this.style.display="inline-block",this.playAnimation("entry")}},{key:"getAuthorDisplayName",value:function(e){return e?this.authors[e].displayName:""}},{key:"getDate",value:function(e){return e?e.format(this.settings.dateFormat):""}},{key:"behaviors",get:function(){return[PostBehavior,Polymer.NeonAnimationRunnerBehavior,ReduxActionsBehavior,ReduxStateBehavior]}}]),e}();Polymer(ThemePost);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ThemePosts=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"beforeRegister",value:function(){this.is="theme-posts",this.properties={authors:{type:Object,statePath:"authors"},settings:{type:Object,statePath:"settings"},animationConfig:{value:function(){return{entry:{name:app.getThemeSettings().pageTransition||"scale-up-animation",node:this}}}}}}},{key:"attached",value:function(){this.style.display="inline-block",this.playAnimation("entry")}},{key:"flexDirection",value:function(e){return e%2==0?"-reverse":""}},{key:"getAuthorDisplayName",value:function(e){return e?this.authors[e].displayName:""}},{key:"getDate",value:function(e){return e?e.format(this.settings.dateFormat):""}},{key:"behaviors",get:function(){return[PostsBehavior,Polymer.NeonAnimationRunnerBehavior,ReduxStateBehavior]}}]),e}();Polymer(ThemePosts),Polymer({is:"type-writer",properties:{delay:{type:Number},cursorDuration:{type:Number,value:0},text:{type:String},speed:{type:Number,value:150},eraseSpeed:{type:Number},typing:{type:Boolean,readOnly:!0,value:!1,notify:!0,reflectToAttribute:!0},_length:{type:Number,value:0},_oldText:{type:String}},observers:["_observeText(text, delay)"],attached:function(){this.delay||0===this.delay||(this.delay=0)},_observeText:function(e,t){if(this.$.text.textContent)return this._oldText=this.$.text.textContent,this.typing&&this._cancel&&this._cancel(),this.erase();this._length=0,this.async(this.type,this.delay)},type:function(){if(this._setTyping(!0),this.$.text.textContent=this.text.substr(0,this._length++),this._length<this.text.length+1)return this._cancel=this.async(this.type,this.speed+(Math.random()-.5)*this.speed/2);this.async(function(){this._setTyping(!1),this.fire("type-writer-end",this.text)},this.cursorDuration)},erase:function(){if(this._setTyping(!0),this.$.text.textContent=this._oldText.substr(0,this._length--),this._length>=0)return this._cancel=this.async(this.erase,this.eraseSpeed||this.speed);this.type()}});